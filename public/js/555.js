(self.webpackChunk=self.webpackChunk||[]).push([[555],{1555:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var a=t(7757),n=t.n(a);function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function s(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r,t,a,n,o,s){try{var i=e[o](s),l=i.value}catch(e){return void t(e)}i.done?r(l):Promise.resolve(l).then(a,n)}function l(e){return function(){var r=this,t=arguments;return new Promise((function(a,n){var o=e.apply(r,t);function s(e){i(o,a,n,s,l,"next",e)}function l(e){i(o,a,n,s,l,"throw",e)}s(void 0)}))}}const d={name:"User",data:function(){return{user:"",disableEdit:!0,form:{name:"asas",email:"",password:null,password_confirmation:null},users:[]}},methods:{enableEdit:function(){this.disableEdit=!this.disableEdit},editUser:function(e){var r=this;return l(n().mark((function t(){var a,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.put("/api/user/".concat(e),r.form,{headers:{Authorization:"Bearer ".concat(r.token)}});case 3:a=t.sent,r.$nextTick((function(){r.$bvModal.hide("modal-see"),r.form={name:"",email:"",password:null,password_confirmation:null},r.getUsers(),r.$notify({group:"notify",type:"success",title:"User Edited",text:a.message})})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),o=t.t0.response,r.$notify({group:"notify",type:"error",title:"Error",text:o.message});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getUser:function(e){var r=this;return l(n().mark((function t(){var a,o;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.get("/api/user/".concat(e),{headers:{Authorization:"Bearer ".concat(r.token)}});case 3:a=t.sent.data.data.user,r.$nextTick((function(){r.disableEdit=!0,r.user=a.id,r.form.name=a.name,r.form.email=a.email,r.$bvModal.show("modal-see")})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),o=t.t0.response,r.getUsers(),r.$notify({group:"notify",type:"error",title:"Error",text:o.message});case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},addUser:function(){var e=this;return l(n().mark((function r(){var t,a;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,axios.post("/api/register",e.form,{headers:{Authorization:"Bearer ".concat(e.token)}});case 3:t=r.sent,e.$nextTick((function(){e.$bvModal.hide("modal-add"),e.form={name:"",email:"",password:null,password_confirmation:null},e.getUsers(),e.$notify({group:"notify",type:"success",title:"User Added",text:t.message})})),r.next=11;break;case 7:r.prev=7,r.t0=r.catch(0),a=r.t0.response,e.$notify({group:"notify",type:"error",title:"Error",text:a.message});case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))()},getUsers:function(){var e=this;return l(n().mark((function r(){return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,axios.get("/api/user",{headers:{Authorization:"Bearer ".concat(e.token)}});case 2:e.users=r.sent.data.data.users;case 3:case"end":return r.stop()}}),r)})))()},deleteUser:function(e){var r=this;return l(n().mark((function t(){var a;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.delete("/api/user/".concat(e),{headers:{Authorization:"Bearer ".concat(r.token)}});case 3:r.$nextTick((function(){r.getUsers()})),t.next=11;break;case 6:t.prev=6,t.t0=t.catch(0),a=t.t0.response,r.getUser(),r.$notify({group:"notify",type:"error",title:"Error",text:a.message});case 11:case"end":return t.stop()}}),t,null,[[0,6]])})))()}},beforeMount:function(){this.getUsers()},computed:function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){s(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},(0,t(629).Se)({token:"getToken"}))};const c=(0,t(1900).Z)(d,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("main",{staticClass:"py-5",attrs:{role:"main"}},[t("b-container",[t("b-row",[t("b-col",{staticClass:"text-right mb-3",attrs:{cols:"12"}},[t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add",modifiers:{"modal-add":!0}}],attrs:{variant:"primary"}},[e._v(" Add User ")])],1),e._v(" "),t("b-col",{attrs:{cols:"12"}},[t("table",{staticClass:"table table-striped"},[t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("Name")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("Email")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("Options")])])]),e._v(" "),e.users.length>0?t("tbody",e._l(e.users,(function(r){return t("tr",{key:r.id},[t("th",{attrs:{scope:"row"}},[e._v(e._s(r.name))]),e._v(" "),t("td",[e._v(e._s(r.email))]),e._v(" "),t("td",[t("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return e.deleteUser(r.id)}}},[t("i",{staticClass:"fas fa-trash-alt"})]),e._v(" "),t("b-button",{attrs:{size:"sm",variant:"info"},on:{click:function(t){return e.getUser(r.id)}}},[t("i",{staticClass:"fas fa-eye"})])],1)])})),0):e._e()])])],1)],1),e._v(" "),t("b-modal",{attrs:{id:"modal-see",title:"See/Edit user","hide-footer":"",centered:""}},[t("b-container",[t("b-col",{staticClass:"text-right p-0 mb-4",attrs:{cols:"12"}},[t("b-button",{attrs:{variant:"warning"},on:{click:e.enableEdit}},[e._v("Edit")])],1),e._v(" "),t("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(r){var a=r.invalid;return[t("b-form",{on:{submit:function(r){return r.preventDefault(),e.editUser(e.user)}}},[t("b-form-group",[t("ValidationProvider",{attrs:{name:"Name",rules:"required|alpha_spaces"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.valid,n=r.errors;return[t("b-form-input",{attrs:{state:!n[0]&&(!!a||null),disabled:e.disableEdit,placeholder:"name"},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}}),e._v(" "),t("b-form-invalid-feedback",[e._v("\n                "+e._s(n[0])+"\n              ")])]}}],null,!0)})],1),e._v(" "),t("b-form-group",[t("ValidationProvider",{attrs:{name:"Email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.valid,n=r.errors;return[t("b-form-input",{attrs:{state:!n[0]&&(!!a||null),type:"email",disabled:e.disableEdit,placeholder:"email"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}}),e._v(" "),t("b-form-invalid-feedback",[e._v("\n                "+e._s(n[0])+"\n              ")])]}}],null,!0)})],1),e._v(" "),t("b-form-row",[t("b-form-group",{staticClass:"col-md-6"},[t("ValidationProvider",{attrs:{vid:"password",name:"Password",rules:"min:8|confirmed:confirmation_password"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.valid,n=r.errors;return[t("b-form-input",{attrs:{state:!n[0]&&(!!a||null),type:"password",disabled:e.disableEdit,placeholder:"Password"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}}),e._v(" "),t("b-form-invalid-feedback",[e._v("\n                  "+e._s(n[0])+"\n                ")])]}}],null,!0)})],1),e._v(" "),t("b-form-group",{staticClass:"col-md-6"},[t("ValidationProvider",{attrs:{vid:"confirmation_password",name:"Confirmation Password",rules:"required_if:password"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.valid,n=r.errors;return[t("b-form-input",{attrs:{state:!n[0]&&(!!a||null),type:"password",disabled:e.disableEdit,placeholder:"Confirmation Password"},model:{value:e.form.password_confirmation,callback:function(r){e.$set(e.form,"password_confirmation",r)},expression:"form.password_confirmation"}}),e._v(" "),t("b-form-invalid-feedback",[e._v("\n                  "+e._s(n[0])+"\n                ")])]}}],null,!0)})],1),e._v(" "),t("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.disableEdit,expression:"!disableEdit"}],attrs:{type:"submit",variant:"primary",squared:"",block:"",disabled:a}},[e._v("Edit")])],1)],1)]}}])})],1)],1),e._v(" "),t("b-modal",{attrs:{id:"modal-add",title:"Add User","hide-footer":"",centered:""}},[t("b-container",[t("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(r){var a=r.invalid;return[t("b-form",{on:{submit:function(r){return r.preventDefault(),e.addUser(r)}}},[t("b-form-group",[t("ValidationProvider",{attrs:{name:"Name",rules:"required|alpha_spaces"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.valid,n=r.errors;return[t("b-form-input",{attrs:{state:!n[0]&&(!!a||null),placeholder:"name"},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}}),e._v(" "),t("b-form-invalid-feedback",[e._v("\n                "+e._s(n[0])+"\n              ")])]}}],null,!0)})],1),e._v(" "),t("b-form-group",[t("ValidationProvider",{attrs:{name:"Email",rules:"required|email"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.valid,n=r.errors;return[t("b-form-input",{attrs:{state:!n[0]&&(!!a||null),type:"email",placeholder:"email"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}}),e._v(" "),t("b-form-invalid-feedback",[e._v("\n                "+e._s(n[0])+"\n              ")])]}}],null,!0)})],1),e._v(" "),t("b-form-row",[t("b-form-group",{staticClass:"col-md-6"},[t("ValidationProvider",{attrs:{vid:"password",name:"Password",rules:"required|min:8|confirmed:confirmation_password"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.valid,n=r.errors;return[t("b-form-input",{attrs:{state:!n[0]&&(!!a||null),type:"password",placeholder:"Password"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}}),e._v(" "),t("b-form-invalid-feedback",[e._v("\n                  "+e._s(n[0])+"\n                ")])]}}],null,!0)})],1),e._v(" "),t("b-form-group",{staticClass:"col-md-6"},[t("ValidationProvider",{attrs:{vid:"confirmation_password",name:"Confirmation Password",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(r){var a=r.valid,n=r.errors;return[t("b-form-input",{attrs:{state:!n[0]&&(!!a||null),type:"password",placeholder:"Confirmation Password"},model:{value:e.form.password_confirmation,callback:function(r){e.$set(e.form,"password_confirmation",r)},expression:"form.password_confirmation"}}),e._v(" "),t("b-form-invalid-feedback",[e._v("\n                  "+e._s(n[0])+"\n                ")])]}}],null,!0)})],1),e._v(" "),t("b-button",{attrs:{type:"submit",variant:"primary",squared:"",block:"",disabled:a}},[e._v("Add")])],1)],1)]}}])})],1)],1)],1)}),[],!1,null,"4937bcba",null).exports}}]);
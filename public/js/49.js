(self.webpackChunk=self.webpackChunk||[]).push([[49],{49:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(7757),o=r.n(a);function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e,t,r,a,o,n,i){try{var s=e[n](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(a,o)}function c(e){return function(){var t=this,r=arguments;return new Promise((function(a,o){var n=e.apply(t,r);function i(e){s(n,a,o,i,c,"next",e)}function c(e){s(n,a,o,i,c,"throw",e)}i(void 0)}))}}const l={name:"User",data:function(){return{product_slug:"",product_image:"",disableEdit:!0,form:{name:"",email:"",description:"",status:0,image:null},products:[]}},methods:{enableEdit:function(){this.disableEdit=!this.disableEdit},editProduct:function(e){var t=this;return c(o().mark((function r(){var a,n,i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,(a=new FormData).append("_method","PUT"),a.append("name",t.form.name),a.append("description",t.form.description),a.append("price",t.form.price),a.append("status",t.form.status),t.form.image&&(console.log("hola"),a.append("image",t.form.image)),r.next=10,axios.post("/api/product/".concat(e),a,{headers:{Authorization:"Bearer ".concat(t.token)},"Content-Type":"multipart/form-data"});case 10:n=r.sent,t.$nextTick((function(){t.$bvModal.hide("modal-see"),t.form={name:"",email:"",description:"",status:0,image:null},t.product_slug="",t.product_image="",t.getProducts(),t.$notify({group:"notify",type:"success",title:"Product Edited",text:n.message})})),r.next=18;break;case 14:r.prev=14,r.t0=r.catch(0),i=r.t0.response,t.$notify({group:"notify",type:"error",title:"Error",text:i.message});case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()},getProduct:function(e){var t=this;return c(o().mark((function r(){var a,n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,axios.get("/api/product/".concat(e));case 3:a=r.sent.data.data.product,t.$nextTick((function(){t.disableEdit=!0,t.product_slug=a.slug,t.product_image=a.image,t.form.name=a.name,t.form.description=a.description,t.form.price=a.price,t.form.status=a.status,t.$bvModal.show("modal-see")})),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(0),n=r.t0.response,t.getProducts(),t.$notify({group:"notify",type:"error",title:"Error",text:n.message});case 12:case"end":return r.stop()}}),r,null,[[0,7]])})))()},addProduct:function(){var e=this;return c(o().mark((function t(){var r,a,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(r=new FormData).append("name",e.form.name),r.append("description",e.form.description),r.append("price",e.form.price),r.append("status",e.form.status),r.append("image",e.form.image),t.next=9,axios.post("/api/product",r,{headers:{Authorization:"Bearer ".concat(e.token),"Content-Type":"multipart/form-data"}});case 9:a=t.sent,e.$nextTick((function(){e.$bvModal.hide("modal-add"),e.form={name:"",email:"",description:"",status:0,image:null},e.getProducts(),e.$notify({group:"notify",type:"success",title:"Product Added",text:a.message})})),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),n=t.t0.response,e.$notify({group:"notify",type:"error",title:"Error",text:n.message});case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},getProducts:function(){var e=this;return c(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/product",{headers:{Authorization:"Bearer ".concat(e.token)}});case 2:e.products=t.sent.data.data.products;case 3:case"end":return t.stop()}}),t)})))()},deleteProduct:function(e){var t=this;return c(o().mark((function r(){var a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,axios.delete("/api/product/".concat(e),{headers:{Authorization:"Bearer ".concat(t.token)}});case 3:t.$nextTick((function(){t.getProducts()})),r.next=11;break;case 6:r.prev=6,r.t0=r.catch(0),a=r.t0.response,t.getProducts(),t.$notify({group:"notify",type:"error",title:"Error",text:a.message});case 11:case"end":return r.stop()}}),r,null,[[0,6]])})))()}},beforeMount:function(){this.getProducts()},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,r(629).Se)({token:"getToken"}))};const u=(0,r(1900).Z)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"py-5",attrs:{role:"main"}},[r("b-container",[r("b-row",[r("b-col",{staticClass:"text-right mb-3",attrs:{cols:"12"}},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add",modifiers:{"modal-add":!0}}],attrs:{variant:"primary"}},[e._v(" Add Product ")])],1),e._v(" "),r("b-col",{attrs:{cols:"12"}},[r("table",{staticClass:"table table-striped"},[r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("Name")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Price")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Options")])])]),e._v(" "),e.products.length>0?r("tbody",e._l(e.products,(function(t){return r("tr",{key:t.id},[r("th",{attrs:{scope:"row"}},[e._v(e._s(t.name))]),e._v(" "),r("td",[e._v(e._s(t.formatted_price))]),e._v(" "),r("td",[r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(r){return e.deleteProduct(t.slug)}}},[r("i",{staticClass:"fas fa-trash-alt"})]),e._v(" "),r("b-button",{attrs:{size:"sm",variant:"info"},on:{click:function(r){return e.getProduct(t.slug)}}},[r("i",{staticClass:"fas fa-eye"})])],1)])})),0):e._e()])])],1)],1),e._v(" "),r("b-modal",{attrs:{id:"modal-see",size:"lg",title:"See/Edit product","hide-footer":"",centered:""}},[r("b-container",[r("b-row",[r("b-col",{staticClass:"text-right p-0 mb-4",attrs:{cols:"12"}},[r("b-button",{attrs:{variant:"warning"},on:{click:e.enableEdit}},[e._v("Edit")])],1),e._v(" "),r("b-col",{attrs:{cols:"12",lg:"8",order:"1","order-lg":"0"}},[r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.invalid;return[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.editProduct(e.product_slug)}}},[r("b-form-group",[r("ValidationProvider",{attrs:{name:"Name",rules:"required|alpha_spaces"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,o=t.errors;return[r("b-form-input",{attrs:{disabled:e.disableEdit,state:!o[0]&&(!!a||null),placeholder:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("\n                    "+e._s(o[0])+"\n                  ")])]}}],null,!0)})],1),e._v(" "),r("b-form-group",[r("ValidationProvider",{attrs:{name:"Description",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,o=t.errors;return[r("b-form-textarea",{attrs:{disabled:e.disableEdit,state:!o[0]&&(!!a||null),placeholder:"Description"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("\n                    "+e._s(o[0])+"\n                  ")])]}}],null,!0)})],1),e._v(" "),r("b-form-row",[r("b-form-group",{staticClass:"col-md-6"},[r("ValidationProvider",{attrs:{name:"Status",rules:"required|included:0,1"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,o=t.errors;return[r("b-form-radio-group",{attrs:{disabled:e.disableEdit,state:!o[0]&&(!!a||null),options:[{text:"active",value:1},{text:"inactive",value:0}],buttons:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("\n                      "+e._s(o[0])+"\n                    ")])]}}],null,!0)})],1),e._v(" "),r("b-form-group",{staticClass:"col-md-6"},[r("ValidationProvider",{attrs:{name:"Price",rules:"required|double"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,o=t.errors;return[r("b-form-input",{attrs:{disabled:e.disableEdit,state:!o[0]&&(!!a||null),placeholder:"Price"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("\n                      "+e._s(o[0])+"\n                    ")])]}}],null,!0)})],1)],1),e._v(" "),r("b-form-group",[r("ValidationProvider",{attrs:{name:"Image",rules:"image|size:5120|mimes:image/jpeg,image/jpg"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,o=t.errors;return[r("b-form-file",{attrs:{disabled:e.disableEdit,state:!o[0]&&(!!a||null),placeholder:"Choose a file or drop it here..."},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("\n                    "+e._s(o[0])+"\n                  ")])]}}],null,!0)})],1),e._v(" "),r("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.disableEdit,expression:"!disableEdit"}],attrs:{type:"submit",variant:"primary",squared:"",block:"",disabled:a}},[e._v("Edit")])],1)]}}])})],1),e._v(" "),r("b-col",{attrs:{cols:"12",lg:"4",order:"0","order-lg":"1"}},[r("b-img",{attrs:{thumbnail:"",fluid:"",src:e.product_image,alt:e.form.name}})],1)],1)],1)],1),e._v(" "),r("b-modal",{attrs:{id:"modal-add",size:"lg",title:"Add product","hide-footer":"",centered:""}},[r("b-container",[r("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var a=t.invalid;return[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.addProduct(t)}}},[r("b-form-group",[r("ValidationProvider",{attrs:{name:"Name",rules:"required|alpha_spaces"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,o=t.errors;return[r("b-form-input",{attrs:{state:!o[0]&&(!!a||null),placeholder:"name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("\n                "+e._s(o[0])+"\n              ")])]}}],null,!0)})],1),e._v(" "),r("b-form-group",[r("ValidationProvider",{attrs:{name:"Description",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,o=t.errors;return[r("b-form-textarea",{attrs:{state:!o[0]&&(!!a||null),placeholder:"Description"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("\n                "+e._s(o[0])+"\n              ")])]}}],null,!0)})],1),e._v(" "),r("b-form-row",[r("b-form-group",{staticClass:"col-md-6"},[r("ValidationProvider",{attrs:{name:"Status",rules:"required|included:0,1"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,o=t.errors;return[r("b-form-radio-group",{attrs:{state:!o[0]&&(!!a||null),options:[{text:"active",value:1},{text:"inactive",value:0}],buttons:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("\n                  "+e._s(o[0])+"\n                ")])]}}],null,!0)})],1),e._v(" "),r("b-form-group",{staticClass:"col-md-6"},[r("ValidationProvider",{attrs:{name:"Price",rules:"required|double"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,o=t.errors;return[r("b-form-input",{attrs:{state:!o[0]&&(!!a||null),placeholder:"Price"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("\n                  "+e._s(o[0])+"\n                ")])]}}],null,!0)})],1)],1),e._v(" "),r("b-form-group",[r("ValidationProvider",{attrs:{name:"Image",rules:"required|image|size:5120|mimes:image/jpeg,image/jpg"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.valid,o=t.errors;return[r("b-form-file",{attrs:{state:!o[0]&&(!!a||null),placeholder:"Choose a file or drop it here..."},model:{value:e.form.image,callback:function(t){e.$set(e.form,"image",t)},expression:"form.image"}}),e._v(" "),r("b-form-invalid-feedback",[e._v("\n                "+e._s(o[0])+"\n              ")])]}}],null,!0)})],1),e._v(" "),r("b-button",{attrs:{type:"submit",variant:"primary",squared:"",block:"",disabled:a}},[e._v("Add")])],1)]}}])})],1)],1)],1)}),[],!1,null,"a770f030",null).exports}}]);